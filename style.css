/* --- Base & Typography --- */
:root {
    --bg-color: #f8f9fa;
    --text-color: #212529;
    --primary-deep: #004d40;
    --primary-light: #00796b;
    --accent-gold: #ffc107;
    --surface-color: #ffffff;
    --border-color: #dee2e6;
    --shadow-color: rgba(0, 0, 0, 0.1);
    --danger-color: #dc3545;
    --font-family: 'Poppins', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
    --border-radius: 12px;
    --print-green: #008000;
}

body { font-family: var(--font-family); margin: 0; background-color: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; min-height: 100vh; }

/* --- Login Page --- */
.login-body { display: flex; justify-content: center; align-items: center; background: linear-gradient(135deg, var(--primary-deep), var(--primary-light)); }
.login-card { background: var(--surface-color); padding: 2rem 3rem; border-radius: var(--border-radius); box-shadow: 0 10px 30px var(--shadow-color); max-width: 350px; text-align: center; }
.login-card .logo { width: 80px; height: 80px; margin-bottom: 1rem; }
.login-card h1 { margin: 0; color: var(--primary-deep); }
.login-card p { margin-bottom: 1.5rem; color: #6c757d; }
.login-card input { width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid var(--border-color); border-radius: 8px; box-sizing: border-box; }
.login-card button { width: 100%; padding: 0.75rem; border: none; border-radius: 8px; background: var(--accent-gold); color: var(--primary-deep); font-weight: bold; cursor: pointer; transition: transform 0.2s; }
.login-card button:hover { transform: translateY(-2px); }
.error-message { color: var(--danger-color); font-size: 0.9rem; min-height: 1.2rem; }

/* --- Main App Layout --- */
.app-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: var(--surface-color); box-shadow: 0 2px 10px var(--shadow-color); position: sticky; top: 0; z-index: 1000; }
.brand { display: flex; align-items: center; gap: 1rem; }
.brand h1 { margin: 0; font-size: 1.5rem; color: var(--primary-deep); }
.brand p { margin: 0; color: #6c757d; }
.logo-small { width: 48px; height: 48px; }
.app-nav { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.nav-tab { padding: 0.75rem 1.5rem; border: none; background-color: transparent; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500; color: var(--text-color); transition: background-color 0.3s, color 0.3s; }
.nav-tab:hover { background-color: #e9ecef; }
.nav-tab.active { background: var(--accent-gold); color: var(--primary-deep); font-weight: bold; }
.logout-button { background: transparent; border: 1px solid var(--border-color); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; }
.app-main { flex-grow: 1; padding: 2rem; }
.app-view { display: none; }
.app-view.active { display: block; }

/* --- Components --- */
.primary-button { background: var(--primary-light); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: bold; transition: opacity 0.2s; }
.primary-button:hover { opacity: 0.9; }
.secondary-button { background: #f1f3f5; color: var(--text-color); border: 1px solid var(--border-color); padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 500; }
.danger-button { background: var(--danger-color); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: bold; }
.hidden-input { display: none; }
.button-like-label { display: inline-block; padding: 0.75rem 1.5rem; background-color: #6c757d; color: white; border-radius: 8px; cursor: pointer; text-align: center; }
input, select, textarea { width: 100%; padding: 0.7rem; border: 1px solid var(--border-color); border-radius: 8px; box-sizing: border-box; font-family: inherit; font-size: 1rem; }
input:focus, select:focus, textarea:focus { outline: 2px solid var(--accent-gold); }
input[type="color"] { padding: 0.2rem; height: 40px; }

/* --- Dashboard, Tables, Modal --- */
.dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
.stat-card { background: var(--surface-color); padding: 1.5rem; border-radius: var(--border-radius); box-shadow: 0 4px 12px var(--shadow-color); text-align: center; }
.stat-card h3 { margin: 0 0 0.5rem 0; color: var(--primary-light); font-size: 1rem; }
.stat-card p { margin: 0; font-size: 2.25rem; font-weight: bold; color: var(--primary-deep); }
.charts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem; }
.chart-container { background: var(--surface-color); padding: 1.5rem; border-radius: var(--border-radius); box-shadow: 0 4px 12px var(--shadow-color); }
.view-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
.view-controls { display: flex; gap: 1rem; align-items: center; }
.view-controls input[type="search"] { width: 250px; }
.table-container { background: var(--surface-color); border-radius: var(--border-radius); box-shadow: 0 4px 12px var(--shadow-color); overflow-x: auto; }
.data-table { width: 100%; border-collapse: collapse; }
.data-table th, .data-table td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-color); }
.data-table th { font-weight: 600; color: var(--primary-deep); }
.action-buttons button { border: none; background: none; cursor: pointer; font-size: 1.2rem; margin-right: 0.5rem; padding: 0; }
.paid-status { padding: 0.2rem 0.6rem; border-radius: 1rem; font-size: 0.8rem; font-weight: bold; }
.paid-yes { background-color: #d1e7dd; color: #0f5132; }
.paid-no { background-color: #f8d7da; color: #842029; }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); display: none; justify-content: center; align-items: center; z-index: 2000; }
.modal-overlay.active { display: flex; }
.modal-content { background: var(--surface-color); padding: 2rem; border-radius: var(--border-radius); width: 90%; max-width: 600px; position: relative; max-height: 90vh; overflow-y: auto; }
.modal-close-btn { position: absolute; top: 1rem; right: 1rem; border: none; background: none; font-size: 1.5rem; cursor: pointer; }
.modal-form { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.modal-form .full-width { grid-column: 1 / -1; }
.modal-form > label { display: block; margin-bottom: 0.5rem; }
.modal-checkbox-group { display: flex; gap: 2rem; padding-top: 0.5rem; align-items: center; }
.modal-checkbox-group label { display: flex; align-items: center; cursor: pointer; margin-bottom: 0; }
.modal-checkbox-group input[type="checkbox"] { width: auto; margin-right: 0.5rem; }

/* --- Settings --- */
.settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 1.5rem; }
.settings-card { background: var(--surface-color); padding: 1.5rem; border-radius: var(--border-radius); box-shadow: 0 4px 12px var(--shadow-color); }
.form-card { display: flex; flex-direction: column; gap: 1rem; }
.form-card h3 { margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem; }
.data-buttons { display: flex; flex-direction: column; gap: 1rem; }

/* --- Invoice Studio --- */
.studio-layout { display: grid; grid-template-columns: 300px 1fr; gap: 1.5rem; height: calc(100vh - 120px); }
.studio-sidebar { background: var(--surface-color); padding: 1rem; border-radius: var(--border-radius); overflow-y: auto; display: flex; flex-direction: column; }
.studio-main { background: var(--surface-color); padding: 0; border-radius: var(--border-radius); box-shadow: 0 4px 12px var(--shadow-color); overflow-y: hidden; display: flex; flex-direction: column; }
#invoice-content { display: flex; flex-direction: column; height: 100%; }
.invoice-controls { flex-shrink: 0; padding: 1.5rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; gap: 1rem; flex-wrap: wrap; }
.item-add-form { display: flex; gap: 0.5rem; align-items: center; }
.item-add-form select { width: auto; }
.item-add-form input { width: 60px; }
.invoice-actions button { margin-left: 0.5rem; }
.studio-preview-pane { flex-grow: 1; overflow-y: auto; padding: 1.5rem; }
.invoice-booking-list { list-style: none; padding: 0; margin: 1rem 0 0 0; }
.invoice-booking-list li { padding: 0.75rem; border-radius: 8px; cursor: pointer; border: 1px solid transparent; transition: background-color 0.2s; }
.invoice-booking-list li:hover { background-color: #f1f3f5; }
.invoice-booking-list li.active { background-color: #e0f2f1; border-color: var(--primary-light); font-weight: bold; }
#invoice-placeholder { display: flex; justify-content: center; align-items: center; height: 100%; color: #6c757d; padding: 1.5rem; }
.hidden { display: none !important; }

/* --- Simple Invoice Preview Styles --- */
.invoice-preview-wrapper { max-width: 800px; margin: 0 auto; }
.invoice-preview-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
.invoice-preview-table th, .invoice-preview-table td { padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border-color); }
.invoice-preview-table th { font-weight: 600; color: var(--primary-deep); }
.invoice-preview-table td:nth-child(2), .invoice-preview-table td:nth-child(3), .invoice-preview-table td:nth-child(4) { text-align: right; }
.invoice-preview-table tfoot td { text-align: right; font-weight: bold; }
.invoice-preview-table tfoot tr.total td { font-size: 1.2rem; color: var(--primary-deep); border-top: 2px solid var(--primary-deep); }
.action-btn-remove { border: none; background: none; cursor: pointer; font-size: 1rem; padding: 0.25rem; }

/* --- Simple Print Styles --- */
.isp-wrapper { font-family: var(--font-family); color: #333; }
.isp-header { display: flex; justify-content: space-between; align-items: flex-start; padding-bottom: 10mm; border-top: 5px solid var(--print-green); padding-top: 10mm; }
.isp-header-left .isp-logo { height: 18mm; max-width: 60mm; object-fit: contain; margin-bottom: 5mm; }
.isp-header-left p { margin: 0; font-size: 10pt; line-height: 1.4; white-space: pre-wrap; }
.isp-header-right { text-align: center; }
.isp-qr-code { width: 35mm; height: 35mm; border: 1px solid var(--border-color); padding: 2mm; border-radius: 4px; }
.isp-header-right p { margin: 1mm 0 0 0; font-size: 8pt; }
.isp-title { border-bottom: 1px solid var(--border-color); padding-bottom: 8mm; margin-bottom: 8mm; }
.isp-title h1 { color: var(--print-green); font-size: 24pt; margin: 0 0 2mm 0; }
.isp-title p { margin: 0; font-size: 11pt; }
.isp-parties { display: flex; justify-content: space-between; font-size: 10pt; margin-bottom: 10mm; }
.isp-parties > div { width: 30%; }
.isp-parties h3 { font-size: 9pt; color: #888; margin: 0 0 2mm 0; text-transform: uppercase; letter-spacing: 0.5px; }
.isp-parties p { margin: 1mm 0; line-height: 1.4; }
.isp-items-table { width: 100%; border-collapse: collapse; font-size: 10pt; margin-bottom: 10mm; }
.isp-items-table thead { border-bottom: 2px solid #333; }
.isp-items-table th { padding: 3mm 1mm; text-align: left; color: #555; font-weight: bold; }
.isp-items-table td { padding: 3mm 1mm; border-bottom: 1px solid #eee; }
.isp-items-table th:nth-child(3), .isp-items-table td:nth-child(3),
.isp-items-table th:nth-child(4), .isp-items-table td:nth-child(4),
.isp-items-table th:nth-child(5), .isp-items-table td:nth-child(5) { text-align: right; }
.isp-totals { margin-left: auto; width: 50%; max-width: 250px; font-size: 11pt; }
.isp-totals table { width: 100%; }
.isp-totals td { padding: 3mm; }
.isp-totals td:last-child { text-align: right; }
.isp-totals tr:not(.grand-total) td { color: #555; }
.isp-totals tr.grand-total td { font-weight: bold; font-size: 14pt; border-top: 2px solid #333; color: #333; }
.isp-footer { text-align: center; margin-top: 15mm; padding-top: 5mm; border-top: 1px solid var(--border-color); font-size: 9pt; color: #888; }

@media print {
    body { background-color: #fff; padding: 0; margin: 0; }
    .app-header, .studio-layout, .invoice-controls, .invoice-preview-wrapper, .modal-overlay { display: none; }
    #invoice-studio-view, #invoice-print-area { display: block !important; }
    .studio-main, .studio-preview-pane { box-shadow: none; border-radius: 0; padding: 0; overflow: visible; }
    #invoice-print-area { padding: 20mm; }
    @page { size: A4 portrait; margin: 0; }
}

/* --- Responsive --- */
@media (max-width: 992px) {
    .app-header { flex-direction: column; align-items: flex-start; gap: 1rem; }
    .studio-layout { grid-template-columns: 1fr; height: auto; }
    .settings-grid { grid-template-columns: 1fr; }
}
@media (max-width: 768px) {
    .app-main { padding: 1rem; }
    .view-header { flex-direction: column; align-items: flex-start; gap: 1rem; }
    .modal-form { grid-template-columns: 1fr; }
}